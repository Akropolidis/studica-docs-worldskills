<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Encoders &mdash; Studica Robotics 1.0.0 documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/studica-rtd.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" /><link rel="shortcut icon" href="../../_static/Studica_Favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/tabs.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SR Pro Camera" href="../Vision/sr-pro-camera.html" />
    <link rel="prev" title="Limit Switches" href="limit-switches.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Studica Robotics<img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted/index.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://www.studica.com/downloads/Studica-Robotics/FRC-WSR/Titan/Docs/JavaAPIDocs/annotated.html">Java API</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.studica.com/downloads/Studica-Robotics/FRC-WSR/Titan/Docs/CppAPIDocs/annotated.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Software/software-setup/index.html">Software Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Software/programming/index.html">Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labview/setup/index.html">LabVIEW Setup (Beta)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labview/toolkit/index.html">LabVIEW Toolkit (Beta)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labview/using-labview/index.html">Using LabVIEW (Beta)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Software/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Control Station</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ControlStation/index.html">Control Station</a></li>
</ul>
<p class="caption"><span class="caption-text">Building System</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../BuildingSystem/robotics-and-control-systems/index.html">Robotics and Control Systems</a></li>
</ul>
<p class="caption"><span class="caption-text">VMX</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../VMX/networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VMX/setup.html">Connecting Sensors and Actuators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VMX/wpi-channel-addressing.html">WPI Channel Addressing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VMX/vision.html">Configuring and Testing the SR Pro Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VMX/navx.html">Calibrating and Using the navX-sensor IMU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VMX/update.html">Updating Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VMX/os-image.html">VMX OS Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VMX/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Titan</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Titan/titan.html">Titan Quad</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Titan/programing-the-titan.html">Programming the Titan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Titan/download-update-app.html">Download Update App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Titan/using-the-update-app.html">Using the Update App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Titan/titan-status-light.html">Titan Status Light</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Titan/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Sensors</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="cobra.html">Cobra</a></li>
<li class="toctree-l1"><a class="reference internal" href="ultrasonic.html">Ultrasonic Distance Sensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="sharpIR.html">Sharp IR Distance Sensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="limit-switches.html">Limit Switches</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Encoders</a></li>
</ul>
<p class="caption"><span class="caption-text">Vision</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Vision/sr-pro-camera.html">SR Pro Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vision/installing-the-ribbon-cable.html">Installing the Ribbon Cable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Vision/reading-a-barcode/index.html">Reading a Barcode</a></li>
</ul>
<p class="caption"><span class="caption-text">Motors</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Motors/servo-motors.html">Servo Motors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Motors/maverick-dc-motor.html">Maverick DC Motor</a></li>
</ul>
<p class="caption"><span class="caption-text">Servo Control</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Servo/servo-power-block.html">Servo Power Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Servo/servo-smart-programmer.html">Servo Smart Programmer</a></li>
</ul>
<p class="caption"><span class="caption-text">Java Curriculum</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../JavaCurriculum/unit1/index.html">Unit 1: Introduction to Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../JavaCurriculum/unit2/index.html">Unit 2: Starting Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="../JavaCurriculum/unit3/index.html">Unit 3: Java Essentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../JavaCurriculum/unit4/index.html">Unit 4: Inputs and Methods</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Contributing/style-guide.html">Style Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/studica/studica-docs-worldskills/issues">Report an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Studica Robotics</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Encoders</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docs/Sensors/encoders.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="encoders">
<h1>Encoders<a class="headerlink" href="#encoders" title="Permalink to this headline">ÔÉÅ</a></h1>
<p>Encoders are a sensor placed normally on a shaft to provide feedback to controller. This feedback allows for the detection of position, speed and direction of motion control system. There are two types of encoders; absolute and incremental. Absolute encoders report back a location specfic position. Incremental encoders only indicate that there has been a change in postion and what that change was. In robotics we tend to mostly use incremental encoders as they are easier to use and have some more benefical advandages than that of the absolute encoder.</p>
<p>The encoders in the worldskills collection are built into the motors already. This makes it easier for designing drive systems as an external encoder does not need to be designed in.</p>
<div class="section" id="distance-formula">
<h2>Distance Formula<a class="headerlink" href="#distance-formula" title="Permalink to this headline">ÔÉÅ</a></h2>
<div class="section" id="math">
<h3>Math<a class="headerlink" href="#math" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>There is a lot of math assosiated with encoders. Before the encoder class can be used the distance per tick has to be calculated. The formula can be given as:</p>
<div class="math notranslate nohighlight">
\[\begin{equation}
{distancePerTick} =
\frac{2 \pi r}{ticksPerRev * gearRatio}
\end{equation}\]</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">r</span></code> = wheel radius</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ticksPerRev</span></code> = encoder pulses on the output shaft of the motor</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gearRatio</span></code> = an external gear ratio used.</p></li>
</ul>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">ÔÉÅ</a></h4>
<p>Lets look at an example using the Maverick with the 100mm omni wheel attached directly on the shaft of the motor.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">r</span></code> = 51 mm (actual measured value)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ticksPerRev</span></code> = 1440 (encoder counts per 1 revolution of the motor output shaft)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gearRatio</span></code> = 1:1</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{equation}
{distancePerTick} = \frac{2 \pi r}{ticksPerRev * gearRatio}
= \frac{2 \pi 51}{1440 * 1}
= \frac{102 \pi}{1440}
= 0.2225294796
\end{equation}\]</div>
<p>Therefor we can conculde that the distancePerTick for the Maverick using the 100mm omni wheels is <strong>0.2225294796</strong>.</p>
</div>
<div class="section" id="application">
<h4>Application<a class="headerlink" href="#application" title="Permalink to this headline">ÔÉÅ</a></h4>
<p>Now that we have the distancePerTick we can calculate the distance traveled. This is simply formulated by:</p>
<div class="math notranslate nohighlight">
\[distance = {distancePerTick} * {encoderCount}\]</div>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">distancePerTick</span></code> = 0.2225294796</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">encoderCount</span></code> = is the incremental count from the encoder</p></li>
</ul>
<p>Lets look at a few examples:</p>
<p><strong>One Wheel Rotation</strong></p>
<p>encoderCount = 1440</p>
<div class="math notranslate nohighlight">
\[distance = {0.2225294796} * {1440} = 320.44 mm\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The distance measured is in mm as the radius was specficed in mm.</p>
</div>
<p><strong>Ten Wheel Rotations</strong></p>
<p>encoderCount = 14400</p>
<div class="math notranslate nohighlight">
\[distance = {0.2225294796} * {14400} = 3204.43 mm\]</div>
</div>
</div>
<div class="section" id="code">
<h3>Code<a class="headerlink" href="#code" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>Now that we know the math behind it, let‚Äôs look at how to program the encoder for distance measurement.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Java</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">C++ (Header)</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">C++ (Source)</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p><strong>Constants.java</strong></p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Motor Constants</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">TITAN_ID</span>                <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MOTOR</span>                   <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * Encoder Constants</span>
<span class="cm"> */</span>

<span class="c1">//Radius of drive wheel in mm</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">wheelRadius</span>             <span class="o">=</span> <span class="mi">51</span><span class="p">;</span>

<span class="c1">//Encoder pulses per rotation of motor shaft</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">pulsePerRotation</span>        <span class="o">=</span> <span class="mi">1440</span><span class="p">;</span>

<span class="c1">//Gear ratio between motor shaft and output shaft</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">gearRatio</span>            <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">;</span>

<span class="c1">//Pulse per rotation combined with gear ratio</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">encoderPulseRatio</span>    <span class="o">=</span> <span class="n">pulsePerRotation</span> <span class="o">*</span> <span class="n">gearRatio</span><span class="p">;</span>

<span class="c1">//Distance per tick</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">distancePerTick</span>      <span class="o">=</span> <span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="na">PI</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">wheelRadius</span><span class="p">)</span> <span class="o">/</span> <span class="n">encoderPulseRatio</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
<p><strong>Subsystem</strong></p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">com.studica.frc.TitanQuad</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.studica.frc.TitanQuadEncoder</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Subsystem</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Motors</span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="n">TitanQuad</span> <span class="n">motor</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Sensors</span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="n">TitanQuadEncoder</span> <span class="n">encoder</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">Subsystem</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//Motors</span>
        <span class="n">motor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TitanQuad</span><span class="p">(</span><span class="n">Constants</span><span class="p">.</span><span class="na">TITAN_ID</span><span class="p">,</span> <span class="n">Constants</span><span class="p">.</span><span class="na">MOTOR</span><span class="p">);</span>

        <span class="c1">//Sensors</span>
        <span class="n">encoder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TitanQuadEncoder</span><span class="p">(</span><span class="n">motor</span><span class="p">,</span> <span class="n">Constants</span><span class="p">.</span><span class="na">MOTOR</span><span class="p">,</span> <span class="n">Constants</span><span class="p">.</span><span class="na">distancePerTick</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Gets the distance traveled of the motor</span>
<span class="cm">     * &lt;p&gt;</span>
<span class="cm">     * @return the distance traveled</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getEncoderDistance</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">encoder</span><span class="p">.</span><span class="na">getEncoderDistance</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;studica/TitanQuad.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;studica/TitanQuadEncoder.h&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cmath&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">Subsystem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">frc2</span><span class="o">::</span><span class="n">SubsystemBase</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="n">Subsystem</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="nf">GetEncoderDistance</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * Motor Constants</span>
<span class="cm">         */</span><span class="w"></span>
<span class="w">        </span><span class="cp">#define TITAN_ID                42</span>
<span class="w">        </span><span class="cp">#define MOTOR_N                   2</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * Encoder Constants</span>
<span class="cm">         */</span><span class="w"></span>

<span class="w">        </span><span class="c1">//Radius of drive wheel in mm</span>
<span class="w">        </span><span class="cp">#define wheelRadius             51</span>

<span class="w">        </span><span class="c1">//Encoder pulses per rotation of motor shaft</span>
<span class="w">        </span><span class="cp">#define pulsePerRotation        1440</span>

<span class="w">        </span><span class="c1">//Gear ratio between motor shaft and output shaft</span>
<span class="w">        </span><span class="cp">#define gearRatio               1/1</span>

<span class="w">        </span><span class="c1">//Pulse per rotation combined with gear ratio</span>
<span class="w">        </span><span class="cp">#define encoderPulseRatio       pulsePerRotation * gearRatio</span>

<span class="w">        </span><span class="c1">//Distance per tick</span>
<span class="w">        </span><span class="cp">#define distancePerTick         (M_PI * 2 * wheelRadius) / encoderPulseRatio</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * Objects</span>
<span class="cm">         */</span><span class="w"></span>
<span class="w">        </span><span class="n">studica</span><span class="o">::</span><span class="n">TitanQuad</span><span class="w"> </span><span class="n">motor</span><span class="p">{</span><span class="n">TITAN_ID</span><span class="p">,</span><span class="w"> </span><span class="n">MOTOR_N</span><span class="p">};</span><span class="w"></span>
<span class="w">        </span><span class="n">studica</span><span class="o">::</span><span class="n">TitanQuadEncoder</span><span class="w"> </span><span class="n">encoder</span><span class="p">{</span><span class="n">motor</span><span class="p">,</span><span class="w"> </span><span class="n">MOTOR_N</span><span class="p">,</span><span class="w"> </span><span class="n">distancePerTick</span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</td></tr></table></div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;subsystems/Subsystem.h&quot;</span><span class="cp"></span>

<span class="n">Subsystem</span><span class="o">::</span><span class="n">Subsystem</span><span class="p">(){};</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Gets the distance traveled of the motor</span>
<span class="cm"> * &lt;p&gt;</span>
<span class="cm"> * @return the distance traveled</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kt">double</span><span class="w"> </span><span class="nf">Subsystem::GetEncoderDistance</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">encoder</span><span class="p">.</span><span class="n">GetEncoderDistance</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</td></tr></table></div>
</div></div>
</div>
</div>
<div class="section" id="speed">
<h2>Speed<a class="headerlink" href="#speed" title="Permalink to this headline">ÔÉÅ</a></h2>
<p>Besides distance, the encoder can also provide the speed of the motor. Speed can be represented in two main ways <code class="docutils literal notranslate"><span class="pre">rpm</span></code> and <code class="docutils literal notranslate"><span class="pre">m/s</span></code>. Both have advantages and disadvantages but are also easy to implement.</p>
<div class="section" id="rotations-per-minuite-rpm">
<h3>Rotations Per Minuite (RPM)<a class="headerlink" href="#rotations-per-minuite-rpm" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">RPM</span></code> is the number of revolutions of the motor shaft every minute. For example, the <strong>Maverick</strong> DC Motor has a nominal RPM of 100. However, all motors will rarely rotate at the same speed. With the encoder, some math and the RPM can be calculated to use in formulas if required.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The RPM does not consider any gear ratios or the size of the output object, i.e., wheel.</p>
</div>
<p>Fortunately, the Titan has an internal RPM count, so no external math is required. It is as simple as calling the getRPM() functions.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">Java</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">C++ (Header)</button><button aria-controls="panel-1-1-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-2" name="1-2" role="tab" tabindex="-1">C++ (Source)</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><p><strong>Constants.java</strong></p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Motor Constants</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">TITAN_ID</span>                <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MOTOR</span>                   <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
<p><strong>Subsystem</strong></p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">com.studica.frc.TitanQuad</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Subsystem</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Motors</span>
<span class="cm">     */</span>
    <span class="kd">private</span> <span class="n">TitanQuad</span> <span class="n">motor</span><span class="p">;</span>

    <span class="kd">public</span> <span class="nf">Subsystem</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//Motors</span>
        <span class="n">motor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TitanQuad</span><span class="p">(</span><span class="n">Constants</span><span class="p">.</span><span class="na">TITAN_ID</span><span class="p">,</span> <span class="n">Constants</span><span class="p">.</span><span class="na">MOTOR</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Gets the RPM of the motor</span>
<span class="cm">     * &lt;p&gt;</span>
<span class="cm">     * @return the RPM of the motor</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getRPM</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">motor</span><span class="p">.</span><span class="na">getRPM</span><span class="p">(</span><span class="n">Constants</span><span class="p">.</span><span class="na">MOTOR</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;studica/TitanQuad.h&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">Subsystem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">frc2</span><span class="o">::</span><span class="n">SubsystemBase</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="n">Subsystem</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="nf">GetRPM</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * Motor Constants</span>
<span class="cm">         */</span><span class="w"></span>
<span class="w">        </span><span class="cp">#define TITAN_ID                42</span>
<span class="w">        </span><span class="cp">#define MOTOR_N                   2</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * Objects</span>
<span class="cm">         */</span><span class="w"></span>
<span class="w">        </span><span class="n">studica</span><span class="o">::</span><span class="n">TitanQuad</span><span class="w"> </span><span class="n">motor</span><span class="p">{</span><span class="n">TITAN_ID</span><span class="p">,</span><span class="w"> </span><span class="n">MOTOR_N</span><span class="p">};</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</td></tr></table></div>
</div><div aria-labelledby="tab-1-1-2" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-2" name="1-2" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;subsystems/Subsystem.h&quot;</span><span class="cp"></span>

<span class="n">Subsystem</span><span class="o">::</span><span class="n">Subsystem</span><span class="p">(){};</span><span class="w"></span>

<span class="cm">/**</span>
<span class="cm"> * Gets the RPM of the motor</span>
<span class="cm"> * &lt;p&gt;</span>
<span class="cm"> * @return the RPM of the motor</span>
<span class="cm"> */</span><span class="w"></span>
<span class="kt">double</span><span class="w"> </span><span class="nf">Subsystem::GetRPM</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">encoder</span><span class="p">.</span><span class="n">GetRPM</span><span class="p">(</span><span class="n">MOTOR_N</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</td></tr></table></div>
</div></div>
</div>
<div class="section" id="tip-speed-or-velocity">
<h3>Tip Speed or Velocity<a class="headerlink" href="#tip-speed-or-velocity" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>RPM is excellent to have, but it does not give the actual speed of the object, such as a wheel. RPM only gives the speed of the motor shaft. In comes a simple formula to convert RPM to <code class="docutils literal notranslate"><span class="pre">Tip</span> <span class="pre">Speed</span></code> or <code class="docutils literal notranslate"><span class="pre">Velocity</span></code>.</p>
<div class="section" id="id1">
<h4>Math<a class="headerlink" href="#id1" title="Permalink to this headline">ÔÉÅ</a></h4>
<div class="math notranslate nohighlight">
\[\begin{equation}
{Velocity} =
\frac{D \pi S}{60}
\end{equation}\]</div>
<p>Where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">D</span></code> = Diameter of wheel in meters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">œÄ</span></code> = pi</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">S</span></code> = rpm</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">60</span></code> = conversion from minutes to seconds</p></li>
</ul>
</div>
<div class="section" id="id2">
<h4>Example<a class="headerlink" href="#id2" title="Permalink to this headline">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Diameter</span></code> of the wheel is <code class="docutils literal notranslate"><span class="pre">0.102m</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">œÄ</span></code> is <strong>œÄ</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">S</span></code> is the nominal speed of the <strong>Maverick</strong> at <code class="docutils literal notranslate"><span class="pre">100rpm</span></code>.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{equation}
{Velocity} = \frac{0.102 * \pi * 100}{60}
= \frac{34.0442245}{60}
= 0.53407 m/s
\end{equation}\]</div>
</div>
<div class="section" id="id3">
<h4>Application<a class="headerlink" href="#id3" title="Permalink to this headline">ÔÉÅ</a></h4>
<div class="figure align-center">
<img alt="../../_images/encoders-1.png" src="../../_images/encoders-1.png" />
</div>
<p>When looking at the diagram above, the speed is only <strong>0.0314m/s</strong> if using just RPM. When calculating for <code class="docutils literal notranslate"><span class="pre">Y</span></code> the proper speed is given at <strong>0.53407m/s</strong>. There is a clear difference between the two speeds. This can conclude that while the RPM is excellent, it is better to incorporate the adjusted <strong>Tip Speed</strong> or <strong>Velocity</strong> in equations to give more accuracy.</p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="limit-switches.html" class="btn btn-neutral float-left" title="Limit Switches" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../Vision/sr-pro-camera.html" class="btn btn-neutral float-right" title="SR Pro Camera" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Studica.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>